{"version":3,"sources":["SDKError.js"],"names":["Code","require","defaultSDKError","code","UNKNOWN","errors","status","type","getCodeByStatus","codeMap","BAD_REQUEST","NOT_AUTHORIZED","FORBIDDEN","NOT_FOUND","NOT_ALLOWED","CONFLICTED","TOO_MANY_REQUESTS","INTERNAL_ERROR","SERVICE_UNAVAILABLE","Object","keys","indexOf","toString","errorUnknown","assign","exports","errorFromResponse","body","getOwnPropertyNames","length","errorFromValidation","VALIDATION_ERROR","reduce","r","field","codes","push","reason"],"mappings":"AAAA;;AACA,IAAMA,OAAOC,QAAQ,mBAAR,CAAb;AACA,IAAMC,kBAAkB;AACpBC,UAAMH,KAAKI,OADS;AAEpBC,YAAQ,EAFY;AAGpBC,YAAQ,CAHY;AAIpBC,UAAM;AAJc,CAAxB;AAMA,SAASC,eAAT,CAAyBF,MAAzB,EAAiC;AAC7B,QAAMG,UAAU;AACZ,aAAKT,KAAKU,WADE;AAEZ,aAAKV,KAAKW,cAFE;AAGZ,aAAKX,KAAKY,SAHE;AAIZ,aAAKZ,KAAKa,SAJE;AAKZ,aAAKb,KAAKc,WALE;AAMZ,aAAKd,KAAKe,UANE;AAOZ,aAAKf,KAAKgB,iBAPE;AAQZ,aAAKhB,KAAKiB,cARE;AASZ,aAAKjB,KAAKkB;AATE,KAAhB;AAWA,QAAIC,OAAOC,IAAP,CAAYX,OAAZ,EAAqBY,OAArB,CAA6Bf,OAAOgB,QAAP,EAA7B,MAAoD,CAAC,CAAzD,EAA4D;AACxD,eAAOb,QAAQH,MAAR,CAAP;AACH;AACD,WAAON,KAAKI,OAAZ;AACH;AACD,SAASmB,YAAT,CAAsBhB,IAAtB,EAA4B;AACxB,WAAOY,OAAOK,MAAP,CAAc,EAAd,EAAkBtB,eAAlB,EAAmC,EAAEK,UAAF,EAAnC,CAAP;AACH;AACDkB,QAAQF,YAAR,GAAuBA,YAAvB;AACA,SAASG,iBAAT,CAA2BpB,MAA3B,EAAmCqB,IAAnC,EAAyC;AACrC,QAAIrB,UAAU,GAAV,IAAiBA,SAAS,GAA9B,EAAmC;AAC/B,eAAO,IAAP;AACH;AACD,QAAKA,SAAS,GAAT,IAAgBA,UAAU,GAA3B,IAAmC,CAACqB,IAAxC,EAA8C;AAC1C,eAAOJ,aAAa,UAAb,CAAP;AACH;AACD,QAAIJ,OAAOS,mBAAP,CAA2BD,IAA3B,EAAiCE,MAAjC,KAA4C,CAAhD,EAAmD;AAC/C,eAAOV,OAAOK,MAAP,CAAc,EAAd,EAAkBtB,eAAlB,EAAmC;AACtCC,kBAAMwB,KAAKxB,IAAL,IAAaH,KAAKI,OADc;AAEtCC,oBAAQsB,KAAKtB,MAAL,IAAe,EAFe;AAGtCC,0BAHsC;AAItCC,kBAAM;AAJgC,SAAnC,CAAP;AAMH;AACD,WAAOY,OAAOK,MAAP,CAAc,EAAd,EAAkBtB,eAAlB,EAAmC;AACtCC,cAAMK,gBAAgBF,MAAhB,CADgC;AAEtCD,gBAAQ,EAF8B;AAGtCC,sBAHsC;AAItCC,cAAM;AAJgC,KAAnC,CAAP;AAMH;AACDkB,QAAQC,iBAAR,GAA4BA,iBAA5B;AACA,SAASI,mBAAT,CAA6BzB,MAA7B,EAAqC;AACjC,WAAOc,OAAOK,MAAP,CAAc,EAAd,EAAkBtB,eAAlB,EAAmC;AACtCC,cAAMH,KAAK+B,gBAD2B;AAEtC1B,gBAAQc,OAAOC,IAAP,CAAYf,MAAZ,EAAoB2B,MAApB,CAA2B,UAACC,CAAD,EAAIC,KAAJ,EAAc;AAC7C,gBAAMC,QAAQ9B,OAAO6B,KAAP,CAAd;AACAD,cAAEG,IAAF,CAAO,EAAEF,YAAF,EAASG,QAAQF,MAAM,CAAN,CAAjB,EAAP;AACA,mBAAOF,CAAP;AACH,SAJO,EAIL,EAJK;AAF8B,KAAnC,CAAP;AAQH;AACDR,QAAQK,mBAAR,GAA8BA,mBAA9B","file":"SDKError.js","sourcesContent":["\"use strict\";\nconst Code = require(\"./ErrorsConstants\");\nconst defaultSDKError = {\n    code: Code.UNKNOWN,\n    errors: [],\n    status: 0,\n    type: \"request\"\n};\nfunction getCodeByStatus(status) {\n    const codeMap = {\n        400: Code.BAD_REQUEST,\n        401: Code.NOT_AUTHORIZED,\n        403: Code.FORBIDDEN,\n        404: Code.NOT_FOUND,\n        405: Code.NOT_ALLOWED,\n        409: Code.CONFLICTED,\n        429: Code.TOO_MANY_REQUESTS,\n        500: Code.INTERNAL_ERROR,\n        503: Code.SERVICE_UNAVAILABLE\n    };\n    if (Object.keys(codeMap).indexOf(status.toString()) !== -1) {\n        return codeMap[status];\n    }\n    return Code.UNKNOWN;\n}\nfunction errorUnknown(type) {\n    return Object.assign({}, defaultSDKError, { type });\n}\nexports.errorUnknown = errorUnknown;\nfunction errorFromResponse(status, body) {\n    if (status >= 200 && status < 400) {\n        return null;\n    }\n    if ((status < 100 && status >= 600) || !body) {\n        return errorUnknown(\"response\");\n    }\n    if (Object.getOwnPropertyNames(body).length !== 0) {\n        return Object.assign({}, defaultSDKError, {\n            code: body.code || Code.UNKNOWN,\n            errors: body.errors || [],\n            status,\n            type: \"response\"\n        });\n    }\n    return Object.assign({}, defaultSDKError, {\n        code: getCodeByStatus(status),\n        errors: [],\n        status,\n        type: \"response\"\n    });\n}\nexports.errorFromResponse = errorFromResponse;\nfunction errorFromValidation(errors) {\n    return Object.assign({}, defaultSDKError, {\n        code: Code.VALIDATION_ERROR,\n        errors: Object.keys(errors).reduce((r, field) => {\n            const codes = errors[field];\n            r.push({ field, reason: codes[0] });\n            return r;\n        }, [])\n    });\n}\nexports.errorFromValidation = errorFromValidation;\n"]}
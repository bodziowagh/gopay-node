{"version":3,"sources":["Resource.js"],"names":["Resource","api","compilePath","path","pathParams","replace","o","part","s","p","indexOf","defineRoute","method","route","data","callback","options","url","cb","err","result","getBody","FormData","JSON","stringify","getUrl","_url","queryString","Object","keys","map","k","encodeURIComponent","join","send","body","exports"],"mappings":"AAAA;;;;;;IACMA,Q;AACF,sBAAYC,GAAZ,EAAiB;AAAA;;AACb,aAAKA,GAAL,GAAWA,GAAX;AACH;;aACMC,W,wBAAYC,I,EAAMC,U,EAAY;AACjC,eAAOD,KACFE,OADE,CACM,kBADN,EAC0B,UAACC,CAAD,EAAO;AACpC,gBAAMC,OAAOD,EAAED,OAAF,CAAU,UAAV,EAAsB,UAACG,CAAD,EAAIC,CAAJ,EAAU;AACzC,uBAAOL,WAAWK,CAAX,KAAiBD,CAAxB;AACH,aAFY,CAAb;AAGA,mBAAOD,KAAKG,OAAL,CAAa,GAAb,MAAsB,CAAC,CAAvB,GAA2BH,KAAKF,OAAL,CAAa,QAAb,EAAuB,EAAvB,CAA3B,GAAwD,EAA/D;AACH,SANM,EAOFA,OAPE,CAOM,UAPN,EAOkB,UAACG,CAAD,EAAIC,CAAJ;AAAA,mBAAUL,WAAWK,CAAX,KAAiBD,CAA3B;AAAA,SAPlB,CAAP;AAQH,K;;uBACDG,W,wBAAYC,M,EAAQT,I,EAAM;AACtB,YAAMF,MAAM,KAAKA,GAAjB;AACA,eAAO,SAASY,KAAT,CAAeT,UAAf,EAA2BU,IAA3B,EAAiCC,QAAjC,EAA2CC,OAA3C,EAAoD;AACvD,gBAAMC,MAAMjB,SAASE,WAAT,CAAqBC,IAArB,EAA2BC,UAA3B,CAAZ;AACA,gBAAMc,KAAKH,YAAa,UAACI,GAAD,EAAMC,MAAN;AAAA,uBAAiB,IAAjB;AAAA,aAAxB;AACA,qBAASC,OAAT,GAAmB;AACf,oBAAIP,gBAAgBQ,QAApB,EAA8B;AAC1B,2BAAOR,IAAP;AACH,iBAFD,MAGK,IAAI,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,CAAC,KAAD,EAAQ,QAAR,EAAkBJ,OAAlB,CAA0BE,MAA1B,MAAsC,CAAC,CAAvE,EAA0E;AAC3E,2BAAOW,KAAKC,SAAL,CAAeV,IAAf,CAAP;AACH;AACD,uBAAO,IAAP;AACH;AACD,qBAASW,MAAT,CAAgBC,IAAhB,EAAsB;AAClB,oBAAIC,oBAAJ;AACA,oBAAI,CAAC,KAAD,EAAQ,QAAR,EAAkBjB,OAAlB,CAA0BE,MAA1B,MAAsC,CAAC,CAA3C,EAA8C;AAC1Ce,kCAAcC,OAAOC,IAAP,CAAYf,QAAQ,EAApB,EACTgB,GADS,CACL,UAACC,CAAD;AAAA,+BAAUC,mBAAmBD,CAAnB,CAAV,SAAmCC,mBAAmBlB,KAAKiB,CAAL,CAAnB,CAAnC;AAAA,qBADK,EAETE,IAFS,CAEJ,GAFI,CAAd;AAGH;AACD,uBAAON,cAAiBD,IAAjB,SAAyBC,WAAzB,GAAyCD,IAAhD;AACH;AACD,mBAAOzB,IAAIiC,IAAJ,CAAS,EAAEC,MAAMd,SAAR,EAAmBT,cAAnB,EAA2BK,KAAKQ,OAAOR,GAAP,CAAhC,EAAT,EAAwDC,EAAxD,EAA4DF,OAA5D,CAAP;AACH,SAtBD;AAuBH,K;;;;;AAELoB,QAAQpC,QAAR,GAAmBA,QAAnB","file":"Resource.js","sourcesContent":["\"use strict\";\nclass Resource {\n    constructor(api) {\n        this.api = api;\n    }\n    static compilePath(path, pathParams) {\n        return path\n            .replace(/\\((\\w|:|\\/)+\\)/ig, (o) => {\n            const part = o.replace(/:(\\w+)/ig, (s, p) => {\n                return pathParams[p] || s;\n            });\n            return part.indexOf(\":\") === -1 ? part.replace(/\\(|\\)/g, \"\") : \"\";\n        })\n            .replace(/:(\\w+)/ig, (s, p) => pathParams[p] || s);\n    }\n    defineRoute(method, path) {\n        const api = this.api;\n        return function route(pathParams, data, callback, options) {\n            const url = Resource.compilePath(path, pathParams);\n            const cb = callback || ((err, result) => null);\n            function getBody() {\n                if (data instanceof FormData) {\n                    return data;\n                }\n                else if (typeof data === \"object\" && [\"GET\", \"DELETE\"].indexOf(method) === -1) {\n                    return JSON.stringify(data);\n                }\n                return null;\n            }\n            function getUrl(_url) {\n                let queryString;\n                if ([\"GET\", \"DELETE\"].indexOf(method) !== -1) {\n                    queryString = Object.keys(data || {})\n                        .map((k) => `${encodeURIComponent(k)}=${encodeURIComponent(data[k])}`)\n                        .join(\"&\");\n                }\n                return queryString ? `${_url}?${queryString}` : _url;\n            }\n            return api.send({ body: getBody(), method, url: getUrl(url) }, cb, options);\n        };\n    }\n}\nexports.Resource = Resource;\n"]}
{"version":3,"sources":["Merchants.js"],"names":["CRUDResource_1","require","merchant_1","Merchants","arguments","_getVerification","defineRoute","routeVerification","_createVerification","_updateVerification","_createVerify","_changePassword","_forgotPassword","_resetPassword","_getTransactionHistory","_ban","routeBan","_unban","list","callback","data","token","_listRoute","create","_createRoute","validationSchema","merchantCreateSchema","get","id","params","_getRoute","update","_updateRoute","merchantUpdateSchema","delete","_deleteRoute","createVerification","merchantId","merchantCreateVerificationSchema","getVerification","updateVerification","merchantUpdateVerificationSchema","verify","merchantCreateVerifySchema","changePassword","merchantChangePasswordSchema","Boolean","forgotPassword","merchantForgotPasswordSchema","resetPassword","merchantResetPasswordSchema","getTransactionHistory","storeId","merchantTransactionHistory","ban","merchantBanSchema","unban","CRUDResource","routeBase","exports"],"mappings":"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","file":"Merchants.js","sourcesContent":["\"use strict\";\nconst CRUDResource_1 = require(\"./CRUDResource\");\nconst merchant_1 = require(\"../validation/schemas/merchant\");\nclass Merchants extends CRUDResource_1.CRUDResource {\n    constructor() {\n        super(...arguments);\n        this._getVerification = this.defineRoute(\"GET\", Merchants.routeVerification);\n        this._createVerification = this.defineRoute(\"POST\", Merchants.routeVerification);\n        this._updateVerification = this.defineRoute(\"PATCH\", Merchants.routeVerification);\n        this._createVerify = this.defineRoute(\"POST\", \"/merchants/:merchantId/verify\");\n        this._changePassword = this.defineRoute(\"POST\", \"/merchants/:merchantId/password/reset\");\n        this._forgotPassword = this.defineRoute(\"POST\", \"/merchants/password/forgot\");\n        this._resetPassword = this.defineRoute(\"POST\", \"/merchants/password/:token\");\n        this._getTransactionHistory = this.defineRoute(\"GET\", \"/merchants/:id/(stores/:storeId/)transaction_history\");\n        this._ban = this.defineRoute(\"POST\", Merchants.routeBan);\n        this._unban = this.defineRoute(\"DELETE\", Merchants.routeBan);\n    }\n    list(callback, data, token) {\n        return this._listRoute(null, data, callback, { token });\n    }\n    create(data, callback, token) {\n        return this._createRoute(null, data, callback, { token, validationSchema: merchant_1.merchantCreateSchema });\n    }\n    get(id, callback, token) {\n        const params = { id };\n        return this._getRoute(params, null, callback, { token });\n    }\n    update(id, data, callback, token) {\n        const params = { id };\n        return this._updateRoute(params, data, callback, { token, validationSchema: merchant_1.merchantUpdateSchema });\n    }\n    delete(id, callback, token) {\n        const params = { id };\n        return this._deleteRoute(params, null, callback, { token });\n    }\n    createVerification(merchantId, data, callback, token) {\n        const params = { merchantId };\n        return this._createVerification(params, data, callback, { token, validationSchema: merchant_1.merchantCreateVerificationSchema });\n    }\n    getVerification(merchantId, callback, token) {\n        const params = { merchantId };\n        return this._getVerification(params, null, callback, { token });\n    }\n    updateVerification(merchantId, data, callback, token) {\n        const params = { merchantId };\n        return this._updateVerification(params, data, callback, { token, validationSchema: merchant_1.merchantUpdateVerificationSchema });\n    }\n    verify(merchantId, data, callback, token) {\n        const params = { merchantId };\n        return this._createVerify(params, data, callback, { token, validationSchema: merchant_1.merchantCreateVerifySchema });\n    }\n    changePassword(data, callback, merchantId, token) {\n        const params = { merchantId };\n        const validationSchema = merchant_1.merchantChangePasswordSchema(Boolean(token));\n        return this._changePassword(params, data, callback, { token, validationSchema });\n    }\n    forgotPassword(data, callback) {\n        return this._forgotPassword(null, data, callback, { validationSchema: merchant_1.merchantForgotPasswordSchema });\n    }\n    resetPassword(token, data, callback) {\n        return this._resetPassword({ token }, data, callback, { validationSchema: merchant_1.merchantResetPasswordSchema });\n    }\n    getTransactionHistory(id, data, storeId, callback, token) {\n        const params = { id, storeId };\n        return this._getTransactionHistory(params, data, callback, { token, validationSchema: merchant_1.merchantTransactionHistory });\n    }\n    ban(id, data, callback, token) {\n        const params = { id };\n        return this._ban(params, data, callback, { token, validationSchema: merchant_1.merchantBanSchema });\n    }\n    unban(id, callback, token) {\n        const params = { id };\n        return this._unban(params, null, callback, { token });\n    }\n}\nMerchants.routeBase = \"/merchants\";\nMerchants.routeVerification = \"/merchants/:merchantId/verification\";\nMerchants.routeBan = \"/merchants/:merchantId/ban\";\nexports.Merchants = Merchants;\n"]}